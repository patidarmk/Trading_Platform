(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1785:(e,t,s)=>{Promise.resolve().then(s.bind(s,8435))},8435:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),a=s(9563),i=s(5113),l=s(7057);let o={},n={},d={};var c=s(2115),b=s(8506);let u={OKX:"BTC-USDT",Bybit:"BTCUSDT",Deribit:"BTC-PERPETUAL"};function m(){var e,t;let[s,m]=(0,c.useState)("OKX"),[x,h]=(0,c.useState)(),p=u[s],g=(0,l.w)(e=>{var t;return null==(t=e.data[s])?void 0:t[p]});return(0,c.useEffect)(()=>("OKX"===s&&(e=>{if(d[e]&&d[e].readyState===WebSocket.OPEN)return;let t=new WebSocket("wss://ws.okx.com:8443/ws/v5/public");d[e]=t,t.onopen=()=>{t.send(JSON.stringify({op:"subscribe",args:[{channel:"books5",instId:e}]})),console.log("[OKX] Subscribed to ".concat(e))},t.onmessage=t=>{try{let s=JSON.parse(t.data);if(s.data){let[t]=s.data,r=t.bids.map(e=>{let[t,s]=e;return{price:parseFloat(t),quantity:parseFloat(s)}}),a=t.asks.map(e=>{let[t,s]=e;return{price:parseFloat(t),quantity:parseFloat(s)}}),o=(0,i.E)(r,"bid"),n=(0,i.E)(a,"ask");l.w.getState().setOrderbook("OKX",e,o,n)}}catch(e){console.error("[OKX] JSON parse error:",e)}},t.onerror=e=>{console.error("[OKX WS ERROR]",e)},t.onclose=()=>{console.warn("[OKX] Disconnected from ".concat(e)),delete d[e]}})(p),"Bybit"===s&&(e=>{if(o[e]&&o[e].readyState===WebSocket.OPEN)return;let t=new WebSocket("wss://stream.bybit.com/v5/public/linear");o[e]=t,t.onopen=()=>{t.send(JSON.stringify({op:"subscribe",args:["orderbook.50.".concat(e)]})),console.log("[Bybit] Subscribed to ".concat(e))},t.onmessage=t=>{let s=JSON.parse(t.data);if("snapshot"===s.type||"delta"===s.type){let t=(s.data.b||[]).map(e=>{let[t,s]=e;return{price:parseFloat(t),quantity:parseFloat(s)}}),r=(s.data.a||[]).map(e=>{let[t,s]=e;return{price:parseFloat(t),quantity:parseFloat(s)}}),a=(0,i.E)(t,"bid"),o=(0,i.E)(r,"ask");l.w.getState().setOrderbook("Bybit",e,a.slice(0,15),o.slice(0,15))}},t.onerror=e=>{console.error("[Bybit WS ERROR]",e)},t.onclose=()=>{console.warn("[Bybit] Disconnected from ".concat(e)),delete o[e]}})(p),"Deribit"===s&&(e=>{if(n[e]&&n[e].readyState===WebSocket.OPEN)return;let t=new WebSocket("wss://www.deribit.com/ws/api/v2");n[e]=t,t.onopen=()=>{t.send(JSON.stringify({jsonrpc:"2.0",method:"public/subscribe",id:42,params:{channels:["book.".concat(e,".none.10.100ms")]}})),console.log("[Deribit] Subscribed to ".concat(e))},t.onmessage=t=>{let s=JSON.parse(t.data);if(!s.params||!s.params.data)return;let r=s.params.data,a=(r.bids||[]).map(e=>{let[t,s]=e;return{price:t,quantity:s}}),o=(r.asks||[]).map(e=>{let[t,s]=e;return{price:t,quantity:s}}),n=(0,i.E)(a,"bid"),d=(0,i.E)(o,"ask");l.w.getState().setOrderbook("Deribit",e,n.slice(0,15),d.slice(0,15))},t.onerror=e=>{console.error("[Deribit WS ERROR]",e)},t.onclose=()=>{console.warn("[Deribit] Disconnected from ".concat(e)),delete n[e]}})(p),()=>{"OKX"===s&&(e=>{let t=d[e];t&&t.readyState===WebSocket.OPEN&&(t.close(),delete d[e])})(p),"Bybit"===s&&(e=>{let t=o[e];t&&t.readyState===WebSocket.OPEN&&(t.close(),delete o[e])})(p),"Deribit"===s&&(e=>{let t=n[e];t&&t.readyState===WebSocket.OPEN&&(t.close(),delete n[e])})(p)}),[s,p]),(0,r.jsx)("main",{className:"bg-gray-900 min-h-screen text-white p-6",children:(0,r.jsxs)("div",{className:"max-w-[100vw] mx-auto space-y-6",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"\uD83D\uDCCA Trading Dashboard"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mr-2 font-semibold",children:"Venue:"}),(0,r.jsxs)("select",{value:s,onChange:e=>m(e.target.value),className:"bg-gray-800 border border-gray-700 text-white px-3 py-2 rounded",children:[(0,r.jsx)("option",{value:"OKX",children:"OKX"}),(0,r.jsx)("option",{value:"Bybit",children:"Bybit"}),(0,r.jsx)("option",{value:"Deribit",children:"Deribit"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("section",{className:"bg-gray-800 rounded-lg p-4 shadow",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-indigo-400 mb-4",children:"\uD83E\uDDEA Simulate Order Placement"}),(0,r.jsx)(a.A,{onSubmitSim:e=>{m(e.venue),h(e)}})]}),(0,r.jsxs)("section",{className:"bg-gray-800 rounded-lg p-4 shadow max-h-[85vh] overflow-y-auto",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-green-400 mb-4",children:["\uD83D\uDCD8 Orderbook (",p,")"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-green-300 mb-2",children:"Bids"}),(0,r.jsx)("div",{className:"space-y-1",children:null==g||null==(e=g.bids)?void 0:e.map((e,t)=>{var s,a;return(0,r.jsxs)("div",{className:"grid grid-cols-3 text-xs text-green-400",children:[(0,r.jsx)("div",{children:e.price.toFixed(2)}),(0,r.jsx)("div",{children:e.quantity.toFixed(3)}),(0,r.jsx)("div",{children:null!=(a=null==(s=e.total)?void 0:s.toFixed(3))?a:"-"})]},t)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-red-300 mb-2",children:"Asks"}),(0,r.jsx)("div",{className:"space-y-1",children:null==g||null==(t=g.asks)?void 0:t.map((e,t)=>{var s,a;return(0,r.jsxs)("div",{className:"grid grid-cols-3 text-xs text-red-400",children:[(0,r.jsx)("div",{children:e.price.toFixed(2)}),(0,r.jsx)("div",{children:e.quantity.toFixed(3)}),(0,r.jsx)("div",{children:null!=(a=null==(s=e.total)?void 0:s.toFixed(3))?a:"-"})]},t)})})]})]})]}),(0,r.jsxs)("section",{className:"bg-gray-800 rounded-lg p-4 shadow overflow-y-auto max-h-[85vh]",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-yellow-400 mb-4",children:"\uD83D\uDCCA Market Depth & Simulation Details"}),x?(0,r.jsx)(b.A,{venue:x.venue,symbol:x.symbol,simulatedOrder:x}):(0,r.jsx)("div",{className:"text-gray-400",children:"Submit an order to view simulation results."})]})]})]})})}}},e=>{e.O(0,[905,602,441,964,358],()=>e(e.s=1785)),_N_E=e.O()}]);